<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A√±adir carro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-5">
        <h2 class="text-center mb-4">A√±ade tu carro üëçüèª</h2>
        <form id="producto-form">
            <div class="mb-3">
                <label for="Modelo" class="form-label">Modelo</label>
                <input type="text" class="form-control" id="Modelo" required />
            </div>
            <div class="mb-3">
                <label for="Anio" class="form-label">A√±o</label>
                <input type="number" class="form-control" id="Anio" required />
            </div>
            <div class="mb-3">
                <label for="cantidad" class="form-label">Estado (New or used)</label>
                <input type="text" class="form-control" id="Estado" required />
            </div>
            <div class="mb-3">
                <label for="Km" class="form-label">Kilometraje (Si aplica)</label>
                <input type="text" class="form-control" id="Km" required />
            </div>
            <div class="mb-3">
                <label for="Precio_en_dolares" class="form-label">Precio (En USD)</label>
                <input type="number" class="form-control" id="Precio_en_dolares" required />
            </div>
            <div class="mb-3">
                <label for="MSRP" class="form-label">Precio sugerido del fabricante (MSRP)</label>
                <input type="text" class="form-control" id="MSRP" required />
            </div>
            <button type="submit" class="btn btn-success">Guardar</button>
            <a href="index.html" class="btn btn-secondary ms-2">Volver</a>
        </form>

        <div id="mensaje" class="alert mt-4 d-none"></div>
    </div>
    <script>
        document.getElementById('producto-form').addEventListener('submit', function (e) {
            e.preventDefault();

            const nuevoAuto = {
                Modelo: document.getElementById('Modelo').value,
                Anio: parseInt(document.getElementById('Anio').value),
                Estado: document.getElementById('Estado').value,
                Kilometraje: document.getElementById('Km').value,
                Precio_en_dolares: parseFloat(document.getElementById('Precio_en_dolares').value),
                MSRP: document.getElementById('MSRP').value
            };

            fetch('http://localhost:3000/api/autos', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(nuevoAuto)
            })
                .then(response => response.json())
                .then(data => {
                    const mensaje = document.getElementById('mensaje');
                    mensaje.classList.remove('d-none', 'alert-danger');
                    mensaje.classList.add('alert', 'alert-success');
                    mensaje.textContent = 'Carro a√±adido con √©xito üöó';

                    document.getElementById('producto-form').reset();
                })
                .catch(error => {
                    const mensaje = document.getElementById('mensaje');
                    mensaje.classList.remove('d-none', 'alert-success');
                    mensaje.classList.add('alert', 'alert-danger');
                    mensaje.textContent = 'Error al a√±adir el carro';
                });
        });
    </script>

</body>

</html>
